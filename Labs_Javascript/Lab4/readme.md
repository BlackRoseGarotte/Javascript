# Лабораторная работа №4. Работа с DOM-деревом и событиями в JavaScript

## Цель работы апарар
Ознакомить студентов с основами взаимодействия JS с DOM-деревом на основе веб-приложения для учета личных финансов.

## Ход работы
### Организация кода
---
**Модули:**
- **index.js**: Главный файл, который координирует работу всех модулей и обрабатывает события пользовательского интерфейса.
- **transactions.js**: Отвечает за хранение и управление транзакциями (добавление, удаление).
- **ui.js**: Содержит функции для отображения данных в интерфейсе (рендеринг таблицы, показ описания).
- **utils.js**: Предоставляет утилитарные функции (генерация ID, форматирование даты).


**Взаимодействие модулей:**
- **index.js** импортирует функции из других модулей **(transactions.js, ui.js, utils.js)** и использует их для обработки событий, таких как добавление или удаление транзакций.
- Модули взаимодействуют через экспортированные функции и данные (например, массив **transactions**).

**HTML и CSS:**
- HTML предоставляет структуру приложения, включая форму для добавления транзакций, таблицу для отображения данных и секцию для полного описания.
- CSS оформляет интерфейс, обеспечивая удобство использования и визуальную привлекательность.

### Код
---
**index.html**

Этот файл является основным HTML-документом, который определяет структуру приложения. Он содержит форму для добавления транзакций, таблицу для отображения данных и секцию для полного описания.

Реализация:
- Форма **(#transaction-form)** позволяет пользователю вводить описание, сумму и категорию транзакции. Все поля обязательны для заполнения (required).

- Таблица **(#transaction-table)** используется для отображения списка транзакций. Она имеет заголовок с колонками: "Дата и Время", "Категория", "Описание" и "Действие".

- Поле "Общая сумма" **(#total)** отображает текущий баланс на основе всех транзакций.

- Подключается JavaScript через тег `<script type="module">`, что позволяет использовать модули.


**style.css**

CSS-файл отвечает за внешний вид приложения, включая стили для формы, таблицы, кнопок и текстовых элементов.

Реализация:
- Используется адаптивная верстка с центрированием контента и ограничением максимальной ширины **(800px)**.

- Кнопки имеют эффекты при наведении **(hover)**, что улучшает пользовательский опыт.

- Цветовые акценты используются для обозначения положительных **(positive)** и отрицательных **(negative)** транзакций.

- Стиль секции "Полное описание" **(#full-description)** выделяет её на фоне остального контента.

**transactions.js**

Этот модуль управляет массивом транзакций, предоставляя функции для добавления и удаления транзакций.

Реализация:

- Экспортируется массив **transactions**, который хранит все транзакции.

- Функция **addTransaction** добавляет новую транзакцию в массив.

- Функция **deleteTransaction** удаляет транзакцию по её уникальному ID, используя метод **findIndex** для поиска нужной записи.

**ui.js**

Модуль отвечает за отображение данных в интерфейсе, включая рендеринг таблицы и показ полного описания транзакции.

Реализация:

- Функция **renderTable** очищает текущее содержимое таблицы и перерисовывает её на основе массива transactions. Каждая строка получает класс **positive** или **negative** в зависимости от суммы транзакции.

- Функция **showFullDescription** обновляет содержимое секции **#full-description**, показывая полное описание выбранной транзакции.

**index.js**

Главный модуль, который связывает все остальные модули. Обрабатывает события пользовательского интерфейса и управляет логикой приложения.
 
Реализация:

- Функция **calculateTotal** пересчитывает общую сумму всех транзакций и обновляет значение в интерфейсе.

- Обработчик события submit для формы добавляет новую транзакцию, вызывая функции **generateId**, **formatDate**, **addTransaction**, **renderTable** и **calculateTotal**.

- Обработчик события **click** для таблицы удаляет транзакцию при нажатии на кнопку "Удалить" или показывает полное описание при клике на строку.

### Документация
---
Код задокументирован по стандарту JSDoc для того, чтоб другой разработчик мог понять работу функций и кода в принципе.

### Контрольные вопросы
---
1. Каким образом можно получить доступ к элементу на веб-странице с помощью JavaScript?
---
Для олучения доступа к элементам DOM в JavaScript используются следующие методы:

- **document.getElementById(id)**: Возвращает элемент по его уникальному идентификатору (id).

- **document.querySelector(selector)**:
Возвращает первый элемент, соответствующий указанному CSS-селектору.

- **document.querySelectorAll(selector)**:
Возвращает NodeList всех элементов, соответствующих указанному CSS-селектору.

- **document.getElementsByTagName(tagName)**:
Возвращает HTMLCollection элементов с указанным тегом.

2.  Что такое делегирование событий и как оно используется для эффективного управления событиями на элементах DOM?
---
Делегирование событий — это техника, при которой обработчик события добавляется не к каждому элементу индивидуально, а к их общему родительскому элементу. Это позволяет эффективно управлять событиями для большого количества динамически создаваемых или изменяемых элементов. События "всплывают" от целевого элемента к его родителям. Обработчик на родительском элементе проверяет, какой именно дочерний элемент вызвал событие, используя свойство **event.target**.

3. Как можно изменить содержимое элемента DOM с помощью JavaScript после его выборки?
---
Содержимое элемента DOM можно изменить несколькими способами:
- Используя свойство **textContent** для изменения текстового содержимого.

- Используя свойство **innerHTML** для изменения содержимого HTML-документа.

- Используя методы **setAttribute** или напрямую обращайтесь к свойствам элемента.

- Используя свойство **style** изменять стили документа.

4. Как можно добавить новый элемент в DOM дерево с помощью JavaScript?
---
Новый элемент добавляется в DOM через **createElement**, настройку его свойств и использование методов например **appendChild** или **insertBefore**.

## Вывод:
В ходе работы был разработан модульный проект для учета транзакций с четким разделением функционала между файлами. Были использованы современные подходы JavaScript: ES6-модули,делегирование событий и работа с DOM что позволило создать удобное и масштабируемое приложение для добавления удаления и отображения транзакций с подсчетом общей суммы.
